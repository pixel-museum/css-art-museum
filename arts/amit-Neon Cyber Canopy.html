<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Neon Cyber Canopy</title>
<style>
:root{
  --bg-deep:#0b0720;
  --mid-deep:#0f1028;
  --teal:#00f0d1;
  --magenta:#ff3db8;
  --transition-fast:220ms cubic-bezier(.2,.9,.25,1);
  --transition-slow:900ms cubic-bezier(.2,.9,.25,1);
}

html,body{height:100%;margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;}
body{
  background: radial-gradient(1200px 600px at 10% 10%, rgba(15,10,35,0.7), transparent 10%),
              radial-gradient(800px 400px at 90% 90%, rgba(10,5,30,0.6), transparent 10%),
              linear-gradient(180deg,var(--bg-deep), var(--mid-deep) 50%);
  color:#e6eef8;
  display:flex;
  align-items:center;
  justify-content:center;
  min-height:100vh;
  overflow:hidden;
  padding:20px;
}

.card{
  width:min(1080px,96vw);
  aspect-ratio:16/9;
  border-radius:14px;
  position:relative;
  overflow:hidden;
  box-shadow:0 22px 80px rgba(2,6,23,0.6);
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
}

.canopy{
  position:absolute;
  inset:12px;
  border-radius:12px;
  overflow:hidden;
  background:
    radial-gradient(800px 300px at 10% 20%, rgba(12,6,40,0.5), transparent 10%),
    linear-gradient(180deg, rgba(6,2,20,0.7), rgba(2,1,8,0.6));
  -webkit-backdrop-filter: blur(6px);
  backdrop-filter: blur(6px);
  isolation:isolate;
}

.canopy::before{
  content:"";
  position:absolute;inset:0;
  background: linear-gradient(120deg, rgba(0,240,209,0.06), rgba(255,61,184,0.06) 40%, rgba(15,10,60,0.02));
  mix-blend-mode: screen;
  filter: blur(30px);
  transform: translateZ(0);
  transition: opacity var(--transition-slow);
  pointer-events:none;
}

.color-wash{
  position:absolute;inset:-20% -10%;
  background: conic-gradient(from 160deg at 50% 40%, rgba(0,240,209,0.18), rgba(255,61,184,0.18), rgba(70,0,120,0.12));
  mix-blend-mode: color-dodge;
  filter: blur(40px) saturate(130%);
  transform: scale(1.05);
  animation: wash-rotate 16s linear infinite;
  pointer-events:none;
  opacity:0.9;
}

@keyframes wash-rotate{
  from{transform: scale(1.03) rotate(0deg);}
  to{transform: scale(1.03) rotate(360deg);}
}

.leaf-layer{
  position:absolute;inset:0;
  pointer-events:auto;
}

svg.leaf{
  position:absolute;
  width:140px;height:140px;
  transform-origin:50% 50%;
  filter: drop-shadow(0 8px 40px rgba(0,120,140,0.08));
  transition: transform var(--transition-fast), filter var(--transition-fast);
  mix-blend-mode: screen;
}

.bokeh{
  position:absolute;
  inset:0;
  pointer-events:none;
  mix-blend-mode: screen;
}
.bokeh .orb{
  position:absolute;
  border-radius:50%;
  filter: blur(20px);
  opacity:0.12;
  transform-origin:center;
  will-change: transform, opacity;
  animation: drift 14s ease-in-out infinite;
}
@keyframes drift{
  0%{transform: translateY(0) scale(1)}
  50%{transform: translateY(-22px) scale(1.06)}
  100%{transform: translateY(0) scale(1)}
}

.spark{
  position:absolute;
  width:6px;height:6px;border-radius:50%;
  background: radial-gradient(circle, #fff 0%, rgba(255,255,255,0.05) 60%, transparent 100%);
  box-shadow: 0 0 12px 4px rgba(255,255,255,0.18), 0 0 36px 16px rgba(0,240,209,0.06);
  opacity:0;
  pointer-events:none;
  transform: translate(-50%,-50%) scale(0.2);
  transition: opacity 220ms linear, transform 240ms cubic-bezier(.2,.9,.2,1);
  mix-blend-mode: screen;
}

:root[data-mode="day"]{
  --bg-deep:#071029;
  --mid-deep:#09122a;
}
:root[data-mode="night"]{
  --bg-deep:#04020b;
  --mid-deep:#08051a;
}

.canopy:hover .leaf{transform: translateY(-6px) rotate(var(--r,0deg)) scale(var(--s,1)); filter: drop-shadow(0 14px 48px rgba(80,20,120,0.12));}
.leaf[data-glow="true"] use{filter: drop-shadow(0 0 28px var(--glow, #00f0d1));}
.leaf[data-glow="true"]{z-index:3;transform: translateY(-14px) scale(1.08) rotate(var(--r,0deg));}

@media (prefers-reduced-motion: reduce){
  .color-wash, .bokeh .orb, svg.leaf{animation:none; transition:none}
  :root{--prefers-reduced-motion: reduce;}
}
</style>
</head>
<body>
<div class="card" role="region" aria-label="Neon Cyber Canopy">
  <div class="canopy" id="canopy" tabindex="0">
    <div class="color-wash" aria-hidden="true"></div>
    <div class="leaf-layer" id="leafLayer" aria-hidden="true"></div>
    <div class="bokeh" aria-hidden="true">
      <div class="orb" style="left:10%;top:20%;width:220px;height:220px;background:linear-gradient(180deg,#00f0d1,#8a00ff);animation-delay:0s"></div>
      <div class="orb" style="left:80%;top:70%;width:160px;height:160px;background:linear-gradient(180deg,#ff3db8,#00d6ff);animation-delay:2s"></div>
      <div class="orb" style="left:55%;top:14%;width:120px;height:120px;background:linear-gradient(180deg,#7b34ff,#00f0d1);animation-delay:1.8s"></div>
    </div>
    <div id="sparks"></div>
    <svg style="position:absolute;inset:0;width:100%;height:100%;pointer-events:none" preserveAspectRatio="none" aria-hidden="true">
      <defs>
        <pattern id="grid" width="32" height="32" patternUnits="userSpaceOnUse">
          <path d="M32 0 L0 0 0 32" stroke="rgba(255,255,255,0.02)" stroke-width="1"/>
        </pattern>
      </defs>
      <rect width="100%" height="100%" fill="url(#grid)" opacity="0.06"></rect>
    </svg>
  </div>
</div>

<script>
const $=(s,b=document)=>b.querySelector(s);
const rand=(a,b)=>Math.random()*(b-a)+a|0;

const leafSVG=(id,x,y,s,r,depth,a,bcolor)=>{
  return `<svg class="leaf" data-depth="${depth}" data-id="${id}" style="left:${x}%;top:${y}%;width:${s}px;height:${s}px;transform:translate(-50%,-50%) rotate(${r}deg)" viewBox="0 0 120 120" aria-hidden="true"><defs><linearGradient id="g${id}" x1="0" x2="1" y1="0" y2="1"><stop offset="0" stop-color="${a}" stop-opacity="0.98"/><stop offset="1" stop-color="${bcolor}" stop-opacity="0.94"/></linearGradient><filter id="glow${id}" x="-50%" y="-50%" width="200%" height="200%"><feGaussianBlur stdDeviation="8" result="b"/><feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge></filter></defs><g filter="url(#glow${id})"><path d="M20 60 Q30 18 60 20 Q95 22 98 60 Q95 95 60 100 Q28 96 20 60 Z" fill="url(#g${id})" stroke="rgba(255,255,255,0.06)" stroke-width="1.2"/><path d="M44 54 Q56 46 74 54" stroke="rgba(255,255,255,0.06)" stroke-width="1.1" fill="none" opacity="0.35"/></g></svg>`;
};

function populateLeaves(count=20){
  const layer=$('#leafLayer');
  layer.innerHTML='';
  for(let i=0;i<count;i++){
    const id=Date.now().toString(36)+i;
    const depth=Math.random();
    const x=rand(4,96);
    const y=rand(8,78)+Math.round(depth*8);
    const size=Math.round(rand(80,180)*(1.0-depth*0.35));
    const rot=rand(-28,28);
    const mix=Math.random();
    const stopA=mix>0.6?'#00f0d1':'#4de0e8';
    const stopB=mix>0.4?'#ff3db8':'#7b34ff';
    layer.insertAdjacentHTML('beforeend',leafSVG(id,x,y,size,rot,depth,stopA,stopB));
  }
  attachLeafHandlers();
}

function createSpark(x,y,color){
  const s=document.createElement('div');
  s.className='spark';
  s.style.left=x+'px';
  s.style.top=y+'px';
  s.style.background=`radial-gradient(circle, ${color} 0%, rgba(255,255,255,0.06) 50%, transparent 100%)`;
  document.getElementById('sparks').appendChild(s);
  requestAnimationFrame(()=>{
    s.style.opacity='1';
    const dx=(Math.random()-0.5)*220;
    const dy=-(Math.random()*120+30);
    s.style.transform=`translate(${dx}px, ${dy}px) scale(1)`;
    s.style.transition=`transform ${600+rand(0,600)}ms cubic-bezier(.2,.9,.2,1), opacity 600ms linear`;
  });
  setTimeout(()=>s.style.opacity='0',300);
  setTimeout(()=>s.remove(),1200);
}

function attachLeafHandlers(){
  const leaves=document.querySelectorAll('.leaf');
  leaves.forEach(leaf=>{
    leaf.addEventListener('pointerenter',()=>{
      leaf.setAttribute('data-glow','true');
      leaf.style.setProperty('--glow',getComputedStyle(document.documentElement).getPropertyValue('--teal')||'#00f0d1');
      const rect=leaf.getBoundingClientRect();
      const px=rect.left+rect.width/2;
      const py=rect.top+rect.height/2-8;
      for(let i=0;i<8;i++) setTimeout(()=>createSpark(px+(Math.random()-0.5)*rect.width/2,py+(Math.random()-0.5)*rect.height/2,'rgba(255,255,255,1)'),i*40);
    });
    leaf.addEventListener('pointerleave',()=>leaf.removeAttribute('data-glow'));
    leaf.setAttribute('tabindex','0');
    leaf.addEventListener('focus',()=>leaf.dispatchEvent(new Event('pointerenter')));
    leaf.addEventListener('blur',()=>leaf.dispatchEvent(new Event('pointerleave')));
    const r=(Math.random()-0.5)*8;
    const s=1+Math.random()*0.08;
    leaf.style.setProperty('--r',r+'deg');
    leaf.style.setProperty('--s',s);
    const floatDur=6000+Math.random()*9000;
    leaf.animate([
      { transform: leaf.style.transform },
      { transform: leaf.style.transform+' translateY(-6px) rotate('+ (r*0.6) +'deg)' },
      { transform: leaf.style.transform }
    ],{ duration: floatDur, iterations: Infinity, direction: 'alternate', easing: 'ease-in-out', delay: Math.random()*1000 });
  });
}

document.documentElement.setAttribute('data-mode','night');
populateLeaves(22);

document.addEventListener('keydown',e=>{
  if(e.key==='d'){document.documentElement.setAttribute('data-mode','day')}
  if(e.key==='n'){document.documentElement.setAttribute('data-mode','night')}
  if(e.key==='r'){populateLeaves(rand(14,32))}
});
</script>
</body>
</html>