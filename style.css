/*
 * ðŸŒŸ IMPROVEMENTS FOR ANIMATED CIRCULAR GALLERY ðŸŒŸ
 *
 * 1. New dedicated class for the circular gallery: .circular-gallery.
 * 2. Establishes a 3D context using 'perspective' on the container.
 * 3. Uses 'transform-style: preserve-3d' on the container to allow 3D positioning of children.
 * 4. Positions each art card in 3D space along a circle's circumference.
 * 5. Adds a subtle rotation animation to the entire carousel.
 */

/* === ANIMATED CIRCULAR GALLERY STYLES START === */

/* The main gallery container needs 3D context */
.circular-gallery {
  /* Inherit general gallery properties */
  display: flex; /* Change to flex to stack cards for rotation */
  justify-content: center;
  align-items: center;
  gap: 0; /* Remove gap as items will be positioned in 3D */

  max-width: 1000px; /* Adjust max-width to center the 3D element */
  margin: 60px auto 80px;
  height: 400px; /* Give the container a defined height for centering */

  /* CRITICAL: Set up 3D space */
  perspective: 1500px;
  transform-style: preserve-3d;
  position: relative;
}

/* Base class for the carousel itself (the rotating part) */
.circular-gallery-carousel {
  position: absolute;
  width: 100%;
  height: 100%;
  transform-style: preserve-3d;
  animation: rotateCarousel 40s infinite linear;
}

/* Pause animation on hover for inspection */
.circular-gallery-carousel:hover {
  animation-play-state: paused;
}

/* Art Card Positioning in 3D Space */
.circular-gallery .art-card {
  position: absolute; /* Take cards out of the normal flow */
  top: 50%;
  left: 50%;
  width: 300px; /* Fixed width for consistent circle size */
  height: 350px; /* Fixed height for consistent circle size */
  margin-left: -150px; /* Half of width to center */
  margin-top: -175px; /* Half of height to center */

  /* Ensure card stays flat in 3D space initially */
  transform: none;
  opacity: 0.95;
  cursor: pointer;
  pointer-events: auto; /* Re-enable pointer events */
}

.circular-gallery .art-card:hover {
  /* Enhanced hover effect for circular gallery */
  transform: scale(1.05) translateZ(100px);
  box-shadow: 0 10px 40px var(--shadow-strong);
  z-index: 10;
}

/* Calculate the positioning for N elements (e.g., 6 elements) */
/* We need to define the radius (R) and the rotation angle (A) for each card.
   R is set by the translateZ value.
   A = (360deg / N) * index.
   For 6 cards, A = index * 60deg. R is chosen for a nice circular appearance.
*/
:root {
  --radius: 500px; /* Defines the depth of the circle */
}

.circular-gallery .art-card:nth-child(1) {
  transform: rotateY(calc(1 * 60deg)) translateZ(var(--radius));
}
.circular-gallery .art-card:nth-child(2) {
  transform: rotateY(calc(2 * 60deg)) translateZ(var(--radius));
}
.circular-gallery .art-card:nth-child(3) {
  transform: rotateY(calc(3 * 60deg)) translateZ(var(--radius));
}
.circular-gallery .art-card:nth-child(4) {
  transform: rotateY(calc(4 * 60deg)) translateZ(var(--radius));
}
.circular-gallery .art-card:nth-child(5) {
  transform: rotateY(calc(5 * 60deg)) translateZ(var(--radius));
}
.circular-gallery .art-card:nth-child(6) {
  transform: rotateY(calc(6 * 60deg)) translateZ(var(--radius));
}

/* Animation for the carousel rotation */
@keyframes rotateCarousel {
  from {
    transform: rotateY(0deg);
  }
  to {
    transform: rotateY(360deg);
  }
}

/* Override general gallery styles for this specific layout */
/* Disable the animated glow border on the circular gallery, as it can interfere with 3D */
.circular-gallery::before {
    content: none;
}

/* Remove card entrance animation as it will conflict with the 3D positioning */
.circular-gallery .art-card {
    animation: none;
    opacity: 1;
}

/* Media query for smaller screens: revert to a standard grid or stack */
@media (max-width: 1000px) {
    .circular-gallery {
        perspective: none;
        transform-style: flat;
        height: auto;
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 30px;
    }

    .circular-gallery-carousel {
        position: static;
        width: 100%;
        height: auto;
        animation: none;
        transform-style: flat;
    }

    .circular-gallery .art-card {
        position: static;
        width: auto;
        height: auto;
        margin: 0;
        transform: none;
        /* Re-enable a simple entrance animation if desired */
        animation: cardEntrance 0.8s ease-out both;
    }

    .circular-gallery .art-card:hover {
        transform: translateY(-12px);
        box-shadow: 0 8px 25px var(--shadow-medium);
        z-index: auto;
    }
}

/* === ANIMATED CIRCULAR GALLERY STYLES END === */
